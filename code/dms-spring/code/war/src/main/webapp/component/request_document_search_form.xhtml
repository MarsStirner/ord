<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:e5ui="http://efive.ru/uitemplates"
	xmlns:e5ui-comp="http://efive.ru/uitemplates/composite"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<ui:composition template="/WEB-INF/jsf-template/template.xhtml">

	<ui:define name="running_head">

		<e5ui-comp:userSessionUpdate rendered="true" interval="300" />
		<h:outputScript library="js" name="datepicker_init_ru.js"
			target="head" />
		<e5ui-comp:outputUtilScript />
	</ui:define>

	<ui:define name="header">
		<div id="form_header">
			<div class="actionbar">
				<div class="menu">
					<div class="defbutton">
						<h:commandLink action="#{request_search_documents.search}"
							styleClass="searchbutton">
							<h:graphicImage value="#{resource['images:button-search.png']}" />					
            				Найти
						</h:commandLink>
					</div>
					<div class="defbutton">
						<h:commandLink action="#{request_search_documents.clear}"
							styleClass="searchbutton">
							<h:graphicImage value="#{resource['images:button-refresh.png']}" />					
            				Очистить
						</h:commandLink>
					</div>
				</div>
			</div>
		</div>
	</ui:define>

	<ui:define name="left_menu"></ui:define>

	<ui:define name="content">
		<div id="header_content">
			<h:panelGroup rendered="true">
				<div class="name">Форма поиска</div>
			</h:panelGroup>
		</div>

		<div class="main_content">
			<e5ui:formPart id="editFormPart">
				<!-- <e5ui:tabPanel id="content_table">
					<e5ui:tabPage headerText="Реквизиты" actionBehavior="submit"
						selected="true"> -->
				<h:panelGroup rendered="true">
					<div class="row">
						<table class="form_grid">
							<tr class="row">
								<td class="first"><label for="main_content_form:statusШв">
										<span class="title">Статус документа: </span> </label></td>
								<td class="second" colspan="3"><h:selectOneMenu
										id="statusId" value="#{request_search_documents.statusId}">
										<f:selectItem itemLabel="" itemValue="" />
										<f:selectItem itemLabel="Зарегистрирован" itemValue="2" />
										<f:selectItem itemLabel="На исполнении" itemValue="80" />
										<f:selectItem itemLabel="Исполнен" itemValue="90" />
										<f:selectItem itemLabel="В архиве" itemValue="100" />
										<f:selectItem itemLabel="Изъят из архива" itemValue="110" />
									</h:selectOneMenu></td>
							</tr>
							<tr class="row">
								<td class="first"><label> <span class="title">
											<h:outputLink title="Автор"
												onclick="authorSelectModalVar.clickOpen('authorSelectModal'); return false;">
														Автор
													</h:outputLink> </span> </label> <e5ui-comp:modalWindow id="authorSelectModal"
										modalWindowHolder="#{request_search_documents.authorSelectModal}"
										render=":main_content_form:author" execute="select_table"
										showButtons="false" style="width: 500px;"
										widgetVar="authorSelectModalVar">
										<div id="title">Выбор автора</div>
										<div id="modal_container" style="margin-top: 0;">
											<div class="searchbar">
												<span style="float: left; margin-top: 3px">Поиск:&nbsp;</span>
												<h:inputText id="filter_string"
													value="#{request_search_documents.authorSelectModal.userList.filter}"
													style="display:block; float:left; margin-right:10px;"
													title="Поиск" />
												<h:commandButton value=" "
													action="#{request_search_documents.authorSelectModal.userList.changePageOffset(0)}"
													styleClass="searchbutton">
													<f:ajax
														execute=":main_content_form:authorSelectModal:filter_string"
														render=":main_content_form:authorSelectModal:ajaxModal :main_content_form:authorSelectModal:authors_modal_paging" />
												</h:commandButton>
											</div>
											<div class="wrap" style="height: 300px;">
												<div class="inner" style="height: 300px;">
													<e5ui:dataTable id="select_table" border="0"
														cellpadding="0" cellspacing="0"
														value="#{request_search_documents.authorSelectModal.userList.allWithEmptyUser}"
														var="row" grouping="false" width="100%">
														<e5ui:row
															onclick="e5ui_util.clickElement(this, 'selectLink$');"
															styleClass="#{request_search_documents.authorSelectModal.selected(row)? 'grid_row_selected': ''}" />
														<e5ui:column>
															<f:facet name="header">
																<p>Автор</p>
															</f:facet>
															<h:outputText value="#{row}" converter="PersonConverter" />
															<h:commandLink id="selectLink" style="display: none;"
																rendered="#{not request_search_documents.authorSelectModal.selected(row)}"
																action="#{request_search_documents.authorSelectModal.select(row)}" />
														</e5ui:column>
													</e5ui:dataTable>
												</div>
											</div>
											<div style="clear: both;">
												<h:panelGroup id="authors_modal_paging">
													<e5ui-comp:tablePager id="authors_pager"
														documentListHolder="#{request_search_documents.authorSelectModal.userList}" />
												</h:panelGroup>
											</div>
										</div>
										<div class="e5ui-modal-bottombuttons">
											<h:button
												onclick="authorSelectModalVar.clickSave(); return false;"
												value="Выбрать" />
											<h:button
												onclick="authorSelectModalVar.clickClose(); return false;"
												value="Отмена" />
										</div>
									</e5ui-comp:modalWindow>
								</td>
								<td class="second" colspan="3"><h:outputText id="author"
										value="#{request_search_documents.author}"
										converter="PersonConverter" class="wide" />
								</td>
							</tr>							
							<tr class="row">
								<td class="first"><label for="main_content_form:form">
										<span class="title">Вид документа: </span> </label>
								</td>
								<td class="second" colspan="3"><h:selectOneMenu id="form"
										value="#{request_search_documents.form}"
										converter="RequestDocumentFormConverter"
										style="font-size:10pt;">
										<f:selectItems
											value="#{dictionaryManagement.getDocumentFormsByCategoryWithEmptyValue('Обращения граждан')}" />
									</h:selectOneMenu></td>
							</tr>
							<tr class="row">
								<td class="first"><label
									for="main_content_form:registrationNumber"> <span
										class="title">Регистрационный номер</span> </label>
								</td>
								<td class="second" colspan="3"><h:inputText
										id="registrationNumber"
										value="#{request_search_documents.registrationNumber}">
									</h:inputText></td>
							</tr>
							<tr class="row">
								<td class="first"><label
									for="main_content_form:startCreationDate:dateEditor"> <span
										class="title">Дата создания: от</span> </label></td>
								<td class="second"><e5ui-comp:inputDate
										id="startCreationDate"
										value="#{request_search_documents.startCreationDate}" lang="ru" />
								</td>
								<td class="first"><label
									for="main_content_form:endCreationDate:dateEditor"> <span
										class="title">до</span> </label></td>
								<td class="second"><e5ui:marker for="endCreationDate" /> <e5ui-comp:inputDate
										id="endCreationDate"
										value="#{request_search_documents.endCreationDate}" lang="ru" /> <e5ui:marker
										for="endCreationDate" />
								</td>
							</tr>
						<tr class="row">
								<td class="first"><label
									for="main_content_form:startRegistrationDate:dateEditor">
										<span class="title">Дата регистрации: от</span> </label></td>
								<td class="second"><e5ui-comp:inputDate
										id="startRegistrationDate"
										value="#{request_search_documents.startRegistrationDate}" lang="ru" />
								</td>
								<td class="first"><label
									for="main_content_form:endRegistrationDate:dateEditor">
										<span class="title">до</span> </label></td>
								<td class="second"><e5ui:marker for="endRegistrationDate" />
									<e5ui-comp:inputDate id="endRegistrationDate"
										value="#{request_search_documents.endRegistrationDate}" lang="ru" />
									<e5ui:marker for="endRegistrationDate" />
								</td>

							</tr>
							<tr class="row">
								<td class="first"><label
									for="main_content_form:startDeliveryDate:dateEditor"> <span
										class="title">Дата поступления: от</span> </label></td>
								<td class="second"><e5ui-comp:inputDate
										id="startDeliveryDate"
										value="#{request_search_documents.startDeliveryDate}" lang="ru" />
									<e5ui:marker for="startDeliveryDate" /></td>
								<td class="first"><label
									for="main_content_form:endDeliveryDate:dateEditor"> <span
										class="title">до</span> </label></td>
								<td class="second"><e5ui-comp:inputDate
										id="endDeliveryDate"
										value="#{request_search_documents.endDeliveryDate}" lang="ru" /> <e5ui:marker
										for="endDeliveryDate" /></td>
							</tr>
							<tr class="row">
								<td class="first"><label
									for="main_content_form:startExecutionDate:dateEditor">
										<span class="title">Срок исполнения: от</span> </label></td>
								<td class="second"><e5ui-comp:inputDate
										id="startExecutionDate"
										value="#{request_search_documents.startExecutionDate}" lang="ru" />
								</td>
								<td class="first"><label
									for="main_content_form:endExecutionDate:dateEditor"> <span
										class="title">до</span> </label></td>
								<td class="second"><e5ui-comp:inputDate
										id="endExecutionDate"
										value="#{request_search_documents.endExecutionDate}" lang="ru" />
								</td>
							</tr>
							<tr class="row">
								<td class="first"><label
									for="main_content_form:deliveryType"> <span
										class="title">Тип доставки: </span> </label>
								</td>
								<td class="second" colspan="3"><h:selectOneMenu
										id="deliveryType"
										value="#{request_search_documents.deliveryType}"
										converter="DeliveryTypeConverter" style="font-size:10pt;">
										<f:selectItems
											value="#{dictionaryManagement.deliveryTypesWithEmptyValue}" />
									</h:selectOneMenu></td>
							</tr>
							<tr class="row">
								<td class="first"><label
									for="main_content_form:senderLastName"> <span
										class="title">Фамилия:</span> </label>
								</td>
								<td class="second" colspan="3"><h:inputText
										id="senderLastName"
										value="#{request_search_documents.senderLastName}"
										class="wide" /></td>
							</tr>
							<tr class="row">
								<td class="first"><label
									for="main_content_form:senderFirstName"> <span
										class="title">Имя:</span> </label>
								</td>
								<td class="second" colspan="3"><h:inputText
										id="senderFirstName"
										value="#{request_search_documents.senderFirstName}"
										class="wide" /></td>
							</tr>
							<tr class="row">
								<td class="first"><label
									for="main_content_form:senderMiddleName"> <span
										class="title">Отчество:</span> </label>
								</td>
								<td class="second" colspan="3"><h:inputText
										id="senderMiddleName"
										value="#{request_search_documents.senderMiddleName}"
										class="wide" /></td>
							</tr>
							<tr class="row">
								<td class="first"><label> <span class="title">
											<h:outputLink title="Ответственный исполнитель"
												onclick="executorSelectModalVar.clickOpen('executorSelectModal'); return false;">
														Ответственный исполнитель
													</h:outputLink> </span> </label> <e5ui-comp:modalWindow id="executorSelectModal"
										modalWindowHolder="#{request_search_documents.executorSelectModal}"
										render=":main_content_form:executor" execute="select_table"
										showButtons="false" style="width: 500px;"
										widgetVar="executorSelectModalVar">
										<div id="title">Выбор исполнителя</div>
										<div id="modal_container" style="margin-top: 0;">
											<div class="searchbar">
												<span style="float: left; margin-top: 3px">Поиск:&nbsp;</span>
												<h:inputText id="filter_string"
													value="#{request_search_documents.executorSelectModal.userList.filter}"
													style="display:block; float:left; margin-right:10px;"
													title="Поиск" />
												<h:commandButton value=" "
													action="#{request_search_documents.executorSelectModal.userList.changePageOffset(0)}"
													styleClass="searchbutton">
													<f:ajax
														execute=":main_content_form:executorSelectModal:filter_string"
														render=":main_content_form:executorSelectModal:ajaxModal :main_content_form:executorSelectModal:executors_modal_paging" />
												</h:commandButton>
											</div>
											<div class="wrap" style="height: 300px;">
												<div class="inner" style="height: 300px;">
													<e5ui:dataTable id="select_table" border="0"
														cellpadding="0" cellspacing="0"
														value="#{request_search_documents.executorSelectModal.userList.allWithEmptyUser}"
														var="row" grouping="false" width="100%">
														<e5ui:row
															onclick="e5ui_util.clickElement(this, 'selectLink$');"
															styleClass="#{request_search_documents.executorSelectModal.selected(row)? 'grid_row_selected': ''}" />
														<e5ui:column>
															<f:facet name="header">
																<p>Ответственный исполнитель</p>
															</f:facet>
															<h:outputText value="#{row}" converter="PersonConverter" />
															<h:commandLink id="selectLink" style="display: none;"
																rendered="#{not request_search_documents.executorSelectModal.selected(row)}"
																action="#{request_search_documents.executorSelectModal.select(row)}" />
														</e5ui:column>
													</e5ui:dataTable>
												</div>
											</div>
											<div style="clear: both;">
												<h:panelGroup id="executors_modal_paging">
													<e5ui-comp:tablePager id="executors_pager"
														documentListHolder="#{request_search_documents.executorSelectModal.userList}" />
												</h:panelGroup>
											</div>
										</div>
										<div class="e5ui-modal-bottombuttons">
											<h:button
												onclick="executorSelectModalVar.clickSave(); return false;"
												value="Выбрать" />
											<h:button
												onclick="executorSelectModalVar.clickClose(); return false;"
												value="Отмена" />
										</div>
									</e5ui-comp:modalWindow>
								</td>
								<td class="second" colspan="3"><h:outputText id="executor"
										value="#{request_search_documents.executor}"
										converter="PersonConverter" class="wide" />
								</td>
							</tr>
							<tr class="row">
								<td class="first"><label> <span class="title">
											<h:outputLink title="Адресаты:"
												onclick="userListSelectModalVar.clickOpen('recipientUsersSelectModal'); return false;">
														Адресаты
													</h:outputLink> </span> </label> <e5ui-comp:modalWindow id="recipientUsersSelectModal"
										modalWindowHolder="#{request_search_documents.recipientUsersSelectModal}"
										render=":main_content_form:recipients" execute="select_table"
										showButtons="false" style="width: 500px;"
										widgetVar="userListSelectModalVar">
										<div id="title">Выбор адресатов</div>
										<div id="modal_container" style="margin-top: 0;">
											<div class="searchbar">
												<span style="float: left; margin-top: 3px">Поиск:&nbsp;</span>
												<h:inputText id="filter_string"
													value="#{request_search_documents.recipientUsersSelectModal.userList.filter}"
													style="display:block; float:left; margin-right:10px;"
													title="Поиск" />
												<h:commandButton value=" "
													action="#{request_search_documents.recipientUsersSelectModal.userList.changePageOffset(0)}"
													styleClass="searchbutton">
													<f:ajax
														execute=":main_content_form:recipientUsersSelectModal:filter_string"
														render=":main_content_form:recipientUsersSelectModal:ajaxModal :main_content_form:recipientUsersSelectModal:modal_paging" />
												</h:commandButton>
											</div>
											<div class="wrap" style="height: 300px;">
												<div class="inner" style="height: 300px;">
													<e5ui:dataTable id="select_table" border="0"
														cellpadding="0" cellspacing="0"
														value="#{userList.allWithEmptyUser}" var="row"
														grouping="false" width="100%">
														<e5ui:row
															onclick="e5ui_util.clickElement(this, 'selectLink$');"
															styleClass="#{request_search_documents.recipientUsersSelectModal.selected(row)? 'grid_row_selected': ''}" />
														<e5ui:column>
															<f:facet name="header">
																<p>Адресаты</p>
															</f:facet>
															<h:outputText value="#{row}" converter="PersonConverter" />
															<h:commandLink id="selectLink" style="display: none;"
																rendered="#{not request_search_documents.recipientUsersSelectModal.selected(row)}"
																action="#{request_search_documents.recipientUsersSelectModal.select(row)}" />
															<h:commandLink id="unselectLink" style="display: none;"
																rendered="#{request_search_documents.recipientUsersSelectModal.selected(row)}"
																action="#{request_search_documents.recipientUsersSelectModal.unselect(row)}" />
														</e5ui:column>
													</e5ui:dataTable>
												</div>
											</div>
											<div style="clear: both;">
												<h:panelGroup id="modal_paging">
													<e5ui-comp:tablePager id="pager"
														documentListHolder="#{request_search_documents.recipientUsersSelectModal.userList}" />
												</h:panelGroup>
											</div>
										</div>
										<div class="e5ui-modal-bottombuttons">
											<h:button
												onclick="userListSelectModalVar.clickSave(); return false;"
												value="Выбрать" />
											<h:button
												onclick="userListSelectModalVar.clickClose(); return false;"
												value="Отмена" />
										</div>
									</e5ui-comp:modalWindow>
								</td>
								<td class="second" colspan="3"><div
										style="overflow-y: scroll; height: 60px">
										<h:panelGroup id="recipients">
											<label><ui:repeat
													value="#{request_search_documents.recipientUsers}"
													var="element">
													<h:outputText value="#{element}"
														converter="PersonConverter" class="width" />
													<br />
												</ui:repeat> </label>
										</h:panelGroup>
									</div></td>
							</tr>
							<tr class="row">
								<td class="first"><label
									for="main_content_form:shortDescription"> <span
										class="title">Краткое содержание</span> </label>
								</td>
								<td class="second" colspan="3"><h:inputText
										id="shortDescription"
										value="#{request_search_documents.shortDescription}"
										class="wide">
										<!-- <f:ajax render="main_content_form:shortDescription" />-->
									</h:inputText> <e5ui:marker for="shortDescription" />
								</td>
							</tr>
							<tr class="row">
								<td class="first"></td>
								<td class="second"></td>
								<td class="third"></td>
								<td class="fourth"></td>
							</tr>
						</table>
					</div>
				</h:panelGroup>
				<!-- </e5ui:tabPage>
				</e5ui:tabPanel> -->

			</e5ui:formPart>
		</div>

		<e5ui-comp:splashScreen id="splash_screen" timeout="0">
			<f:facet name="timeoutPanel">
				<div
					style="background-color: white; border-top: solid 1px black; border-bottom: solid 1px black; padding: 30px; text-align: center; margin: 200px auto; width: 300px;">
					Пожалуйста, подождите...</div>
			</f:facet>
		</e5ui-comp:splashScreen>
		<script>
			e5ui_splashScreen.startShowOnSubmit('splash_screen',
					[ 'main_content_form' ]);
		</script>
	</ui:define>

	<ui:define name="footer">
		<e5ui:multiMarker id="main_form_marker" rendered="true"
			hintWindowStyleClass="e5ui-marker-hintWindow"
			hintWindowInfoStyleClass="e5ui-marker-hintWindow-info"
			hintWindowWarnStyleClass="e5ui-marker-hintWindow-warn"
			hintWindowErrorStyleClass="e5ui-marker-hintWindow-error"
			hintWindowFatalStyleClass="e5ui-marker-hintWindow-fatal"
			displayMode="window">
			<h:button
				onclick="e5ui_multiMarker.remove('main_form_marker'); return false;"
				value="ОК" />
		</e5ui:multiMarker>
		<h:outputStylesheet library="css" name="datatable.css" />
		<h:outputStylesheet library="css" name="modalWindow.css" />
		<h:outputStylesheet library="css" name="multiMarker.css" />
		<h:outputStylesheet library="css" name="tabPanel.css" />
	</ui:define>

</ui:composition>

</html>