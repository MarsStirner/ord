<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd"
                   logicalFilePath="init/`wf_history`_cascade.xml"
                   objectQuotingStrategy="QUOTE_ALL_OBJECTS">

    <changeSet id="init/`wf_history`/cascade" author="e.upatov">
        <comment>Добавление каскадных удалений из связующих таблиц при удалениях записей в истории</comment>
        <dropForeignKeyConstraint baseTableName="incoming_document_history" constraintName="FK_incoming_document_history__entry"/>
        <dropForeignKeyConstraint baseTableName="internal_document_history" constraintName="FK_internal_document_history__entry"/>
        <dropForeignKeyConstraint baseTableName="outgoing_document_history" constraintName="FK_outgoing_document_history__entry"/>
        <dropForeignKeyConstraint baseTableName="request_document_history" constraintName="FK_request_document_history__entry"/>
        <dropForeignKeyConstraint baseTableName="task_history" constraintName="FK_task_history__entry"/>

        <addForeignKeyConstraint baseTableName="incoming_document_history" constraintName="FK_incoming_document_history__entry"
                                 baseColumnNames="entry_id" referencedTableName="wf_history" referencedColumnNames="id" onDelete="CASCADE"/>
        <addForeignKeyConstraint baseTableName="internal_document_history" constraintName="FK_internal_document_history__entry"
                                 baseColumnNames="entry_id" referencedTableName="wf_history" referencedColumnNames="id" onDelete="CASCADE"/>
        <addForeignKeyConstraint baseTableName="outgoing_document_history" constraintName="FK_outgoing_document_history__entry"
                                 baseColumnNames="entry_id" referencedTableName="wf_history" referencedColumnNames="id" onDelete="CASCADE"/>
        <addForeignKeyConstraint baseTableName="request_document_history" constraintName="FK_request_document_history__entry"
                                 baseColumnNames="entry_id" referencedTableName="wf_history" referencedColumnNames="id" onDelete="CASCADE"/>
        <addForeignKeyConstraint baseTableName="task_history" constraintName="FK_task_history__entry"
                                 baseColumnNames="entry_id" referencedTableName="wf_history" referencedColumnNames="id" onDelete="CASCADE"/>
    </changeSet>

</databaseChangeLog>